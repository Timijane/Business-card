<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>MEET | Meetrader</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<!-- Import configuration -->
<script type="module" src="config.js"></script>

<style>
  /* Your existing CSS styles remain the same */
  :root {
    --primary: #0080FF;
    --primary-dark: #0066CC;
    --accent: #00C6FF;
    --success: #10B981;
    --error: #EF4444;
    --bg-color: #f0f2f5;
    --card-bg: #fff;
    --text-color: #111;
    --secondary-text: #65676b;
    --border-color: #dddfe2;
    --online: #10B981;
    --offline: #EF4444;
    --radius: 12px;
    --shadow: 0 2px 8px rgba(0,0,0,0.1);
  }

  /* ... rest of your CSS ... */
</style>
</head>
<body>

<div class="app-container">
  <!-- Your HTML structure remains the same -->
  <!-- Sidebar, Navbar, Meetrader Container, etc. -->
</div>

<!-- Post Item Modal -->
<div class="modal" id="postItemModal">
  <!-- Modal content remains the same -->
</div>

<script type="module">
  // Import Firebase modules
  import { 
    getFirestore, collection, addDoc, updateDoc, deleteDoc, doc, getDoc, getDocs, onSnapshot, serverTimestamp, 
    query, orderBy, where, setDoc
  } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-firestore.js";
  import { getAuth, onAuthStateChanged, signOut } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-auth.js";
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.0/firebase-app.js";
  
  // Import configurations
  import { firebaseConfig, cloudinaryConfig } from './config.js';

  // Initialize Firebase with imported config
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const auth = getAuth(app);

  // Use Cloudinary configuration
  const CLOUDINARY_URL = cloudinaryConfig.url;
  const CLOUDINARY_UPLOAD_PRESET = cloudinaryConfig.uploadPreset;

  // File size limits
  const MAX_FILE_SIZE = 10 * 1024 * 1024; // 10MB

  // DOM Elements
  const meetraderItems = document.getElementById('meetraderItems');
  const emptyState = document.getElementById('emptyState');
  const filterBtn = document.getElementById('filterBtn');
  const meetraderFilters = document.getElementById('meetraderFilters');
  const closeFilters = document.getElementById('closeFilters');
  const applyFilters = document.getElementById('applyFilters');
  const postItemBtn = document.getElementById('postItemBtn');
  const postItemModal = document.getElementById('postItemModal');
  const closePostItemModal = document.getElementById('closePostItemModal');
  const cancelPostItem = document.getElementById('cancelPostItem');
  const postItemForm = document.getElementById('postItemForm');
  const imageUpload = document.getElementById('imageUpload');
  const itemImage = document.getElementById('itemImage');
  const imagePreview = document.getElementById('imagePreview');
  const previewImage = document.getElementById('previewImage');
  const searchInput = document.getElementById('searchInput');
  const logoutBtn = document.getElementById('logoutBtn');
  const nightToggleBtn = document.getElementById('nightToggleBtn');
  const currentUserAvatar = document.getElementById('currentUserAvatar');
  const userName = document.getElementById('userName');
  const messageContainer = document.getElementById('messageContainer');

  // State
  let currentUser = null;
  let items = [];
  let filteredItems = [];

  // Currency symbols
  const currencySymbols = {
    'USD': '$', 'EUR': '€', 'GBP': '£', 'CAD': '$', 'AUD': '$',
    'JPY': '¥', 'CNY': '¥', 'INR': '₹', 'NGN': '₦', 'GHS': '₵',
    'KES': 'KSh', 'ZAR': 'R'
  };

  // Upload media to Cloudinary
  async function uploadMedia(file) {
    if (file.size > MAX_FILE_SIZE) {
      throw new Error('File size too large. Maximum 10MB.');
    }

    const formData = new FormData();
    formData.append("file", file);
    formData.append("upload_preset", CLOUDINARY_UPLOAD_PRESET);
    
    try {
      const response = await fetch(CLOUDINARY_URL, {
        method: "POST",
        body: formData,
      });
      
      if (!response.ok) {
        const errorData = await response.json();
        throw new Error(errorData.error?.message || 'Upload failed. Please try again.');
      }
      
      const data = await response.json();
      return data.secure_url;
    } catch (error) {
      console.error('Cloudinary upload error:', error);
      throw new Error('Failed to upload media. Please try again.');
    }
  }

  // Rest of your JavaScript code remains the same...
  // [Include all your existing functions: createItem, toggleLike, deleteItem, etc.]

  // Initialize meetrader when page loads
  document.addEventListener('DOMContentLoaded', initMeetrader);
</script>
</body>
</html>
