<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MEET — Organization</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --primary:#0061FF;
    --accent:#5AE4A8;
    --bg:#f7f9fb;
    --card:#fff;
    --text:#111827;
    --muted:#6b7280;
    --radius:12px;
    --shadow: 0 6px 18px rgba(16,24,40,0.06);
    --org-gradient: linear-gradient(135deg, #0061FF 0%, #5AE4A8 100%);
  }
  body.dark {
    --bg:#081226;
    --card:#0b1726;
    --text:#e6eef8;
    --muted:#93a3bd;
    --shadow: 0 6px 18px rgba(0,0,0,0.6);
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:Inter,system-ui,Segoe UI,Arial;
    background:var(--bg);
    color:var(--text);
    height:100vh;
    display:flex;
    flex-direction:column;
    transition:background .35s,color .35s;
  }

  /* header */
  header{
    display:flex;
    align-items:center;
    gap:16px;
    padding:12px 20px;
    background:var(--card);
    box-shadow:var(--shadow);
    position:sticky;
    top:0;
    z-index:50;
  }
  .left {
    display:flex;
    align-items:center;
    gap:12px;
  }
  .logo-icon{
    width:44px;height:44px;border-radius:8px;
    background:linear-gradient(135deg,var(--primary),var(--accent));
    display:flex;align-items:center;justify-content:center;
    -webkit-mask:url('#m-mask');mask:url('#m-mask') center/contain no-repeat;
  }
  .brand {
    font-weight:700;font-size:18px;color:var(--primary);
  }
  .search {
    flex:1;display:flex;align-items:center;gap:10px;background:#eef3ff;border-radius:10px;padding:8px 12px;
    max-width:600px;
  }
  body.dark .search{background:#0f2134}
  .search input{border:0;background:transparent;outline:none;width:100%;color:var(--text)}
  .header-right{display:flex;align-items:center;gap:10px}

  .status-dot{
    width:10px;height:10px;border-radius:50%;background:#34D399;border:2px solid var(--card);box-shadow:0 0 0 4px rgba(52,211,153,0.09);
    display:inline-block;margin-left:6px;
  }

  /* layout */
  .layout{display:flex;flex:1;overflow:hidden}
  aside{
    width:240px;background:var(--card);padding:18px;border-right:1px solid rgba(0,0,0,0.03);
    display:flex;flex-direction:column;gap:8px;box-shadow:var(--shadow);
    transition: width 0.3s ease;
  }
  aside button{
    border:0;background:transparent;padding:12px 14px;border-radius:10px;text-align:left;font-weight:600;color:var(--muted);cursor:pointer;
    display: flex;
    align-items: center;
    gap: 12px;
    text-decoration: none;
    width: 100%;
    font-family: inherit;
    font-size: inherit;
  }
  aside button.active{color:var(--primary);background:linear-gradient(90deg, rgba(0,97,255,0.06), rgba(90,228,168,0.03));}
  aside button .menu-text {
    transition: opacity 0.3s ease;
  }
  main{flex:1;padding:20px;overflow:auto}

  /* Organization Styles */
  .organization-container {
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }

  .organization-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 30px;
  }

  .organization-title {
    font-size: 28px;
    font-weight: 700;
    background: var(--org-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    margin: 0;
  }

  .organization-actions {
    display: flex;
    gap: 15px;
  }

  .action-btn {
    background: linear-gradient(90deg, var(--primary), var(--accent));
    color: white;
    border: 0;
    padding: 12px 20px;
    border-radius: 10px;
    font-weight: 700;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: transform 0.2s;
  }

  .action-btn:hover {
    transform: translateY(-2px);
  }

  .secondary-btn {
    background: var(--card);
    border: 1px solid rgba(0,0,0,0.08);
    color: var(--text);
    padding: 12px 20px;
    border-radius: 10px;
    font-weight: 600;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
  }

  body.dark .secondary-btn {
    border: 1px solid rgba(255,255,255,0.1);
  }

  .secondary-btn:hover {
    background: rgba(0,97,255,0.05);
  }

  /* Organization Dashboard */
  .org-dashboard {
    display: none;
    flex-direction: column;
    gap: 25px;
  }

  .dashboard-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 15px;
    border-bottom: 1px solid rgba(0,0,0,0.05);
  }

  body.dark .dashboard-header {
    border-bottom: 1px solid rgba(255,255,255,0.05);
  }

  .dashboard-title {
    font-size: 22px;
    font-weight: 700;
    margin: 0;
  }

  .org-info-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
    display: flex;
    gap: 25px;
    align-items: flex-start;
  }

  .org-logo {
    width: 100px;
    height: 100px;
    border-radius: var(--radius);
    object-fit: cover;
    background: rgba(0,97,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 36px;
    color: var(--primary);
    flex-shrink: 0;
  }

  .org-details {
    flex: 1;
  }

  .org-name {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 10px;
  }

  .org-meta {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 15px;
    margin-bottom: 20px;
  }

  .meta-item {
    display: flex;
    flex-direction: column;
    gap: 5px;
  }

  .meta-label {
    font-size: 12px;
    color: var(--muted);
    text-transform: uppercase;
    font-weight: 600;
  }

  .meta-value {
    font-size: 16px;
    font-weight: 600;
  }

  .org-actions {
    display: flex;
    gap: 10px;
  }

  /* Dashboard Stats */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 20px;
    margin-bottom: 25px;
  }

  .stat-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 20px;
    text-align: center;
    box-shadow: var(--shadow);
    transition: transform 0.3s;
  }

  .stat-card:hover {
    transform: translateY(-3px);
  }

  .stat-value {
    font-size: 32px;
    font-weight: 700;
    margin-bottom: 5px;
    background: var(--org-gradient);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .stat-label {
    font-size: 14px;
    color: var(--muted);
  }

  /* Quick Actions */
  .quick-actions {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
    margin-bottom: 25px;
  }

  .action-card {
    background: var(--card);
    border-radius: var(--radius);
    padding: 20px;
    text-align: center;
    box-shadow: var(--shadow);
    transition: transform 0.3s;
    cursor: pointer;
    border: 2px solid transparent;
  }

  .action-card:hover {
    transform: translateY(-5px);
    border-color: var(--primary);
  }

  .action-icon {
    font-size: 30px;
    margin-bottom: 10px;
    display: block;
  }

  .action-title {
    font-size: 16px;
    font-weight: 600;
  }

  /* Announcements */
  .announcements-section {
    background: var(--card);
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
  }

  .section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .section-title {
    font-size: 20px;
    font-weight: 700;
    margin: 0;
  }

  .announcement-form {
    background: rgba(0,97,255,0.03);
    border-radius: var(--radius);
    padding: 20px;
    margin-bottom: 25px;
  }

  .form-group {
    margin-bottom: 15px;
  }

  .form-label {
    display: block;
    font-size: 14px;
    font-weight: 600;
    margin-bottom: 8px;
  }

  .form-input, .form-textarea, .form-select {
    width: 100%;
    padding: 12px 15px;
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    background: var(--bg);
    font-family: inherit;
    font-size: 14px;
    transition: border 0.2s;
  }

  body.dark .form-input, body.dark .form-textarea, body.dark .form-select {
    border: 1px solid rgba(255,255,255,0.1);
    background: var(--card);
  }

  .form-input:focus, .form-textarea:focus, .form-select:focus {
    outline: none;
    border-color: var(--primary);
  }

  .form-textarea {
    resize: vertical;
    min-height: 100px;
  }

  .visibility-options {
    display: flex;
    gap: 15px;
    margin-top: 10px;
  }

  .visibility-option {
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
  }

  .visibility-option input {
    margin: 0;
  }

  .announcement-actions {
    display: flex;
    justify-content: flex-end;
    gap: 10px;
    margin-top: 15px;
  }

  .announcements-list {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }

  .announcement-card {
    background: var(--bg);
    border-radius: var(--radius);
    padding: 20px;
    border-left: 4px solid var(--primary);
  }

  body.dark .announcement-card {
    background: rgba(255,255,255,0.03);
  }

  .announcement-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 10px;
  }

  .announcement-title {
    font-size: 16px;
    font-weight: 700;
    margin: 0;
  }

  .announcement-meta {
    display: flex;
    gap: 10px;
    font-size: 12px;
    color: var(--muted);
  }

  .announcement-visibility {
    background: rgba(0,97,255,0.1);
    color: var(--primary);
    padding: 2px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
  }

  .announcement-content {
    font-size: 14px;
    line-height: 1.5;
    margin-bottom: 10px;
  }

  .announcement-footer {
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: var(--muted);
  }

  /* Staff Management */
  .staff-section {
    background: var(--card);
    border-radius: var(--radius);
    padding: 25px;
    box-shadow: var(--shadow);
  }

  .staff-actions {
    display: flex;
    gap: 10px;
    margin-bottom: 20px;
  }

  .staff-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 15px;
  }

  .staff-card {
    background: var(--bg);
    border-radius: var(--radius);
    padding: 20px;
    display: flex;
    align-items: center;
    gap: 15px;
    transition: transform 0.3s;
  }

  body.dark .staff-card {
    background: rgba(255,255,255,0.03);
  }

  .staff-card:hover {
    transform: translateY(-3px);
  }

  .staff-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    background: rgba(0,97,255,0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 20px;
    color: var(--primary);
    flex-shrink: 0;
  }

  .staff-info {
    flex: 1;
  }

  .staff-name {
    font-weight: 600;
    margin-bottom: 5px;
  }

  .staff-role {
    font-size: 14px;
    color: var(--muted);
    margin-bottom: 5px;
  }

  .staff-id {
    font-size: 12px;
    color: var(--muted);
    font-family: monospace;
  }

  .staff-actions-menu {
    display: flex;
    gap: 5px;
  }

  .staff-action-btn {
    background: transparent;
    border: 1px solid rgba(0,0,0,0.1);
    color: var(--muted);
    width: 30px;
    height: 30px;
    border-radius: 6px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.2s;
  }

  body.dark .staff-action-btn {
    border: 1px solid rgba(255,255,255,0.1);
  }

  .staff-action-btn:hover {
    background: rgba(0,97,255,0.05);
    color: var(--primary);
  }

  /* Registration Form */
  .registration-container {
    max-width: 800px;
    margin: 0 auto;
  }

  .registration-form {
    background: var(--card);
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
  }

  .form-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 25px;
    text-align: center;
  }

  .form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  .form-actions {
    display: flex;
    justify-content: center;
    gap: 15px;
    margin-top: 30px;
  }

  .file-upload {
    border: 2px dashed rgba(0,0,0,0.1);
    border-radius: 8px;
    padding: 30px;
    text-align: center;
    cursor: pointer;
    transition: border 0.2s;
  }

  body.dark .file-upload {
    border: 2px dashed rgba(255,255,255,0.1);
  }

  .file-upload:hover {
    border-color: var(--primary);
  }

  .file-upload-icon {
    font-size: 40px;
    margin-bottom: 10px;
    color: var(--muted);
  }

  .file-upload-text {
    font-size: 14px;
    color: var(--muted);
  }

  /* Staff Login */
  .staff-login-container {
    max-width: 400px;
    margin: 50px auto;
  }

  .login-form {
    background: var(--card);
    border-radius: var(--radius);
    padding: 30px;
    box-shadow: var(--shadow);
    text-align: center;
  }

  .login-title {
    font-size: 24px;
    font-weight: 700;
    margin-bottom: 10px;
  }

  .login-subtitle {
    color: var(--muted);
    margin-bottom: 25px;
  }

  .login-org {
    background: rgba(0,97,255,0.1);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 20px;
    text-align: left;
  }

  .org-login-name {
    font-weight: 600;
    margin-bottom: 5px;
  }

  .org-login-id {
    font-size: 14px;
    color: var(--muted);
  }

  /* Modal Styles */
  .modal-wrap {
    position: fixed;
    inset: 0;
    display: none;
    align-items: center;
    justify-content: center;
    background: rgba(2,6,23,0.5);
    z-index: 100;
    padding: 20px;
  }

  .modal {
    width: 100%;
    max-width: 500px;
    border-radius: 12px;
    background: var(--card);
    padding: 25px;
    box-shadow: var(--shadow);
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
  }

  .modal-title {
    font-size: 20px;
    font-weight: 700;
    margin: 0;
  }

  .close-modal {
    background: transparent;
    border: 0;
    font-size: 20px;
    cursor: pointer;
    color: var(--muted);
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .close-modal:hover {
    background: rgba(0,0,0,0.05);
  }

  body.dark .close-modal:hover {
    background: rgba(255,255,255,0.1);
  }

  .modal-actions {
    display: flex;
    justify-content: flex-end;
    gap: 15px;
    margin-top: 20px;
  }

  .cancel-btn {
    background: transparent;
    border: 1px solid rgba(0,0,0,0.1);
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s;
  }

  body.dark .cancel-btn {
    border: 1px solid rgba(255,255,255,0.1);
  }

  .cancel-btn:hover {
    background: rgba(0,0,0,0.05);
  }

  body.dark .cancel-btn:hover {
    background: rgba(255,255,255,0.1);
  }

  .submit-btn {
    background: linear-gradient(90deg, var(--primary), var(--accent));
    color: white;
    border: 0;
    padding: 10px 20px;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .submit-btn:hover {
    transform: translateY(-2px);
  }

  /* Empty States */
  .empty-state {
    text-align: center;
    padding: 40px 20px;
    color: var(--muted);
  }

  .empty-icon {
    font-size: 60px;
    margin-bottom: 15px;
    opacity: 0.5;
  }

  .empty-title {
    font-size: 18px;
    margin-bottom: 10px;
  }

  .empty-description {
    font-size: 14px;
    max-width: 400px;
    margin: 0 auto 20px;
  }

  /* Responsive */
  @media (max-width:900px){
    aside {
      width: 70px;
    }
    aside button {
      justify-content: center;
      padding: 10px 6px;
    }
    .menu-text {
      opacity: 0;
      width: 0;
      overflow: hidden;
    }
    .search {
      max-width: 400px;
    }
    .form-row {
      grid-template-columns: 1fr;
    }
    .org-info-card {
      flex-direction: column;
      text-align: center;
    }
    .org-meta {
      grid-template-columns: 1fr;
    }
    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
    }
    .quick-actions {
      grid-template-columns: repeat(2, 1fr);
    }
    .staff-list {
      grid-template-columns: 1fr;
    }
  }
  
  @media (max-width:768px){
    .search {
      max-width: 300px;
    }
    .organization-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    .organization-actions {
      width: 100%;
      justify-content: space-between;
    }
    .dashboard-header {
      flex-direction: column;
      align-items: flex-start;
      gap: 15px;
    }
    .visibility-options {
      flex-direction: column;
      gap: 10px;
    }
  }
  
  @media (max-width:640px){
    .search {
      max-width: 200px;
    }
    .stats-grid {
      grid-template-columns: 1fr;
    }
    .quick-actions {
      grid-template-columns: 1fr;
    }
    .org-actions {
      flex-direction: column;
    }
    .announcement-header {
      flex-direction: column;
      gap: 10px;
      align-items: flex-start;
    }
  }
  
  @media (max-width:480px){
    .search {
      max-width: 150px;
    }
    .brand {
      display: none;
    }
    .organization-actions {
      flex-direction: column;
      gap: 10px;
    }
    .action-btn, .secondary-btn {
      width: 100%;
      justify-content: center;
    }
    .staff-login-container {
      margin: 20px auto;
    }
  }
</style>
</head>
<body>

<!-- SVG mask resource -->
<svg style="position:absolute;width:0;height:0" aria-hidden>
  <defs>
    <mask id="m-mask" viewBox="0 0 100 100">
      <path fill="white" d="M10 80 L10 20 L30 60 L50 20 L70 60 L90 20 L90 80 L70 40 L50 80 L30 40 Z"/>
    </mask>
  </defs>
</svg>

<header>
  <div class="left">
    <div class="logo-icon" title="MEET"></div>
    <div class="brand">MEET</div>
  </div>

  <div class="search">
    <span>🔍</span>
    <input id="search" placeholder="Search organizations..." />
  </div>

  <div class="header-right">
    <div style="display:flex;align-items:center;gap:8px">
      <div style="font-size:12px;color:var(--muted)">Online</div>
      <div class="status-dot" title="You are online"></div>
    </div>
    <button id="darkToggle" title="Toggle dark mode">🌙</button>
    <div style="display:flex;align-items:center;gap:8px">
      <img id="userPic" src="https://i.pravatar.cc/100?img=5" style="width:42px;height:42px;border-radius:50%;border:2px solid #fff;object-fit:cover" alt="You">
      <div style="font-weight:700">Alex</div>
    </div>
  </div>
</header>

<div class="layout">
  <aside>
    <button onclick="location.href='feed.html'">
      🏠 <span class="menu-text">Feed</span>
    </button>
    <button onclick="location.href='chat.html'">
      💬 <span class="menu-text">Chat</span>
    </button>
    <button onclick="location.href='conference.html'">
      🎥 <span class="menu-text">Conference</span>
    </button>
    <button onclick="location.href='marketplace.html'">
      🛒 <span class="menu-text">Marketplace</span>
    </button>
    <button onclick="location.href='profile.html'">
      👤 <span class="menu-text">Profile</span>
    </button>
    <button onclick="location.href='meetversity.html'">
      🎓 <span class="menu-text">Meetversity</span>
    </button>
    <button class="active" onclick="location.href='organization.html'">
      🏢 <span class="menu-text">Organization</span>
    </button>

    <div style="flex:1"></div>
    <button id="goLive" style="background:linear-gradient(90deg,var(--primary),var(--accent));color:#fff;border:0;padding:10px;border-radius:10px;font-weight:700;display:flex;align-items:center;gap:12px;justify-content:center">
      <span class="menu-text">Go Live</span>
    </button>
  </aside>

  <main>
    <!-- Organization Dashboard (shown when user has organization) -->
    <div class="organization-container">
      <div class="organization-header">
        <h1 class="organization-title">Organization</h1>
        <div class="organization-actions" id="orgActions">
          <!-- Actions will be populated based on user role -->
        </div>
      </div>

      <!-- Organization Dashboard -->
      <div class="org-dashboard" id="orgDashboard">
        <!-- Organization Info Card -->
        <div class="org-info-card" id="orgInfoCard">
          <!-- Organization info will be populated by JavaScript -->
        </div>

        <!-- Dashboard Stats -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="staffCount">0</div>
            <div class="stat-label">Total Staff</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="announcementsCount">0</div>
            <div class="stat-label">Announcements</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="meetingsCount">0</div>
            <div class="stat-label">Meetings</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="activeProjects">0</div>
            <div class="stat-label">Active Projects</div>
          </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
          <div class="action-card" id="conferenceAction">
            <span class="action-icon">🎥</span>
            <div class="action-title">Start Conference</div>
          </div>
          <div class="action-card" id="manageStaffAction">
            <span class="action-icon">👥</span>
            <div class="action-title">Manage Staff</div>
          </div>
          <div class="action-card" id="createAnnouncementAction">
            <span class="action-icon">📢</span>
            <div class="action-title">Create Announcement</div>
          </div>
          <div class="action-card" id="orgSettingsAction">
            <span class="action-icon">⚙️</span>
            <div class="action-title">Organization Settings</div>
          </div>
        </div>

        <!-- Announcements Section -->
        <div class="announcements-section">
          <div class="section-header">
            <h2 class="section-title">Announcements</h2>
            <button class="secondary-btn" id="newAnnouncementBtn">
              <span>+</span> New Announcement
            </button>
          </div>

          <!-- Announcement Form (Initially Hidden) -->
          <div class="announcement-form" id="announcementForm" style="display: none;">
            <div class="form-group">
              <label class="form-label" for="announcementTitle">Title</label>
              <input type="text" class="form-input" id="announcementTitle" placeholder="Enter announcement title">
            </div>
            <div class="form-group">
              <label class="form-label" for="announcementContent">Content</label>
              <textarea class="form-textarea" id="announcementContent" placeholder="Write your announcement here..."></textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Visibility</label>
              <div class="visibility-options">
                <label class="visibility-option">
                  <input type="radio" name="visibility" value="organization" checked>
                  Organization Dashboard Only
                </label>
                <label class="visibility-option">
                  <input type="radio" name="visibility" value="meet">
                  MEET Platform
                </label>
                <label class="visibility-option">
                  <input type="radio" name="visibility" value="both">
                  Both Platforms
                </label>
              </div>
            </div>
            <div class="announcement-actions">
              <button class="cancel-btn" id="cancelAnnouncement">Cancel</button>
              <button class="submit-btn" id="publishAnnouncement">Publish</button>
            </div>
          </div>

          <!-- Announcements List -->
          <div class="announcements-list" id="announcementsList">
            <!-- Announcements will be populated by JavaScript -->
          </div>
        </div>

        <!-- Staff Management Section -->
        <div class="staff-section">
          <div class="section-header">
            <h2 class="section-title">Staff Management</h2>
            <div class="staff-actions">
              <button class="action-btn" id="addStaffBtn">
                <span>+</span> Add Staff
              </button>
              <button class="secondary-btn" id="generateStaffIdsBtn">
                <span>🔑</span> Generate IDs
              </button>
            </div>
          </div>

          <!-- Staff List -->
          <div class="staff-list" id="staffList">
            <!-- Staff members will be populated by JavaScript -->
          </div>
        </div>
      </div>

      <!-- Registration Form (shown when user has no organization) -->
      <div class="registration-container" id="registrationContainer">
        <div class="registration-form">
          <h2 class="form-title">Register Your Organization</h2>
          
          <div class="form-group">
            <label class="form-label" for="orgName">Organization Name *</label>
            <input type="text" class="form-input" id="orgName" placeholder="Enter your organization name" required>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="orgType">Organization Type</label>
              <select class="form-select" id="orgType">
                <option value="">Select type</option>
                <option value="corporation">Corporation</option>
                <option value="llc">LLC</option>
                <option value="nonprofit">Non-Profit</option>
                <option value="partnership">Partnership</option>
                <option value="sole-proprietorship">Sole Proprietorship</option>
                <option value="other">Other</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="staffCount">Number of Staff *</label>
              <input type="number" class="form-input" id="staffCountInput" placeholder="Enter staff count" min="1" required>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="orgLocation">Location *</label>
            <input type="text" class="form-input" id="orgLocation" placeholder="Enter organization location" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="orgServices">Services/Industry *</label>
            <textarea class="form-textarea" id="orgServices" placeholder="Describe your organization's services or industry" required></textarea>
          </div>

          <div class="form-group">
            <label class="form-label">Government Issued Identity *</label>
            <div class="file-upload" id="identityUpload">
              <div class="file-upload-icon">📄</div>
              <div class="file-upload-text">Click to upload government issued identity document</div>
              <input type="file" id="identityFile" accept=".pdf,.jpg,.jpeg,.png" style="display: none">
            </div>
          </div>

          <div class="form-actions">
            <button class="cancel-btn" onclick="location.href='feed.html'">Cancel</button>
            <button class="submit-btn" id="registerOrgBtn">Register Organization</button>
          </div>
        </div>
      </div>

      <!-- Staff Login (shown when user is staff member) -->
      <div class="staff-login-container" id="staffLoginContainer" style="display: none;">
        <div class="login-form">
          <h2 class="login-title">Staff Portal</h2>
          <p class="login-subtitle">Enter your organization credentials</p>
          
          <div class="login-org" id="loginOrgInfo">
            <!-- Organization info will be populated by JavaScript -->
          </div>

          <div class="form-group">
            <label class="form-label" for="staffId">Staff ID</label>
            <input type="text" class="form-input" id="staffId" placeholder="Enter your staff ID" required>
          </div>

          <div class="form-group">
            <label class="form-label" for="staffPassword">Password</label>
            <input type="password" class="form-input" id="staffPassword" placeholder="Enter your password" required>
          </div>

          <div class="form-actions">
            <button class="submit-btn" id="staffLoginBtn">Login to Portal</button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>

<!-- Add Staff Modal -->
<div class="modal-wrap" id="addStaffModal">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h2 class="modal-title">Add Staff Member</h2>
      <button class="close-modal" id="closeAddStaffModal">✕</button>
    </div>
    
    <div class="form-group">
      <label class="form-label" for="staffName">Full Name</label>
      <input type="text" class="form-input" id="staffName" placeholder="Enter staff member's full name">
    </div>
    
    <div class="form-group">
      <label class="form-label" for="staffRole">Role/Position</label>
      <input type="text" class="form-input" id="staffRole" placeholder="Enter staff role">
    </div>
    
    <div class="form-group">
      <label class="form-label" for="staffEmail">Email Address</label>
      <input type="email" class="form-input" id="staffEmail" placeholder="Enter staff email">
    </div>
    
    <div class="modal-actions">
      <button class="cancel-btn" id="cancelAddStaff">Cancel</button>
      <button class="submit-btn" id="confirmAddStaff">Add Staff</button>
    </div>
  </div>
</div>

<!-- Generate Staff IDs Modal -->
<div class="modal-wrap" id="generateIdsModal">
  <div class="modal" role="dialog" aria-modal="true">
    <div class="modal-header">
      <h2 class="modal-title">Generate Staff IDs</h2>
      <button class="close-modal" id="closeGenerateIdsModal">✕</button>
    </div>
    
    <div class="form-group">
      <label class="form-label">Staff ID Format</label>
      <div style="display:flex;gap:10px;align-items:center">
        <input type="text" class="form-input" id="idPrefix" value="STAFF" style="flex:0 0 100px">
        <span>-</span>
        <input type="number" class="form-input" id="idStart" value="1001" style="flex:0 0 100px">
      </div>
    </div>
    
    <div class="form-group">
      <label class="form-label">Password Length</label>
      <input type="number" class="form-input" id="passwordLength" value="8" min="6" max="12">
    </div>
    
    <div class="modal-actions">
      <button class="cancel-btn" id="cancelGenerateIds">Cancel</button>
      <button class="submit-btn" id="confirmGenerateIds">Generate IDs</button>
    </div>
  </div>
</div>

<script>
// Organization System Architecture

/*
USER ROLES:
1. Organization Owner/Admin - Can manage everything
2. Organization Staff - Can access staff portal with custom ID/password
3. Regular User - No organization (sees registration form)
*/

// Mock data for organizations
const mockOrganizations = [
  {
    id: 'org1',
    name: 'TechVision Inc.',
    type: 'Corporation',
    location: 'San Francisco, CA',
    services: 'Software Development, UI/UX Design, Digital Transformation',
    staffCount: 45,
    registrationId: 'CORP-2023-TECH-7845',
    logo: '🏢',
    ownerId: 'user1',
    staff: [
      {
        id: 'staff1',
        name: 'Sarah Johnson',
        role: 'UI/UX Designer',
        email: 'sarah@techvision.com',
        staffId: 'STAFF-1001',
        password: 'tech2023',
        avatar: '👩‍💼'
      },
      {
        id: 'staff2',
        name: 'Marcus Lee',
        role: 'Product Manager',
        email: 'marcus@techvision.com',
        staffId: 'STAFF-1002',
        password: 'vision45',
        avatar: '👨‍💼'
      },
      {
        id: 'staff3',
        name: 'Emily Chen',
        role: 'Frontend Developer',
        email: 'emily@techvision.com',
        staffId: 'STAFF-1003',
        password: 'dev2023',
        avatar: '👩‍💻'
      }
    ],
    announcements: [
      {
        id: 'ann1',
        title: 'Quarterly All-Hands Meeting',
        content: 'We will be having our quarterly all-hands meeting this Friday at 2 PM in the main conference room. Please make sure to attend.',
        visibility: 'organization',
        date: '2023-10-15',
        author: 'Sarah Johnson'
      },
      {
        id: 'ann2',
        title: 'New Project Kickoff',
        content: 'The new client project starts next Monday. All team members should review the project brief in the shared drive.',
        visibility: 'both',
        date: '2023-10-12',
        author: 'Marcus Lee'
      }
    ]
  }
];

// State
let currentUser = {
  id: 'user1',
  name: 'Alex Johnson',
  email: 'alex@example.com',
  role: 'organization_owner', // 'organization_owner', 'organization_staff', 'regular_user'
  organizationId: 'org1'
};

let currentOrganization = null;
let isStaffLogin = false;

// DOM Elements
const orgDashboard = document.getElementById('orgDashboard');
const registrationContainer = document.getElementById('registrationContainer');
const staffLoginContainer = document.getElementById('staffLoginContainer');
const orgActions = document.getElementById('orgActions');
const orgInfoCard = document.getElementById('orgInfoCard');
const staffCount = document.getElementById('staffCount');
const announcementsCount = document.getElementById('announcementsCount');
const meetingsCount = document.getElementById('meetingsCount');
const activeProjects = document.getElementById('activeProjects');
const announcementsList = document.getElementById('announcementsList');
const staffList = document.getElementById('staffList');
const announcementForm = document.getElementById('announcementForm');
const newAnnouncementBtn = document.getElementById('newAnnouncementBtn');
const cancelAnnouncement = document.getElementById('cancelAnnouncement');
const publishAnnouncement = document.getElementById('publishAnnouncement');
const addStaffBtn = document.getElementById('addStaffBtn');
const generateStaffIdsBtn = document.getElementById('generateStaffIdsBtn');
const addStaffModal = document.getElementById('addStaffModal');
const closeAddStaffModal = document.getElementById('closeAddStaffModal');
const cancelAddStaff = document.getElementById('cancelAddStaff');
const confirmAddStaff = document.getElementById('confirmAddStaff');
const generateIdsModal = document.getElementById('generateIdsModal');
const closeGenerateIdsModal = document.getElementById('closeGenerateIdsModal');
const cancelGenerateIds = document.getElementById('cancelGenerateIds');
const confirmGenerateIds = document.getElementById('confirmGenerateIds');
const registerOrgBtn = document.getElementById('registerOrgBtn');
const staffLoginBtn = document.getElementById('staffLoginBtn');
const loginOrgInfo = document.getElementById('loginOrgInfo');
const conferenceAction = document.getElementById('conferenceAction');
const manageStaffAction = document.getElementById('manageStaffAction');
const createAnnouncementAction = document.getElementById('createAnnouncementAction');
const orgSettingsAction = document.getElementById('orgSettingsAction');

// Initialize
function initOrganization() {
  checkUserOrganization();
  setupEventListeners();
}

// Check user organization status
function checkUserOrganization() {
  // In a real app, this would check the user's organization status from the server
  // For this demo, we're using mock data
  
  if (currentUser.role === 'organization_owner') {
    currentOrganization = mockOrganizations.find(org => org.id === currentUser.organizationId);
    showOrganizationDashboard();
  } else if (currentUser.role === 'organization_staff') {
    showStaffLogin();
  } else {
    showRegistrationForm();
  }
}

// Show organization dashboard
function showOrganizationDashboard() {
  registrationContainer.style.display = 'none';
  staffLoginContainer.style.display = 'none';
  orgDashboard.style.display = 'flex';
  
  // Update actions based on role
  updateOrganizationActions();
  
  // Load organization data
  loadOrganizationData();
}

// Show registration form
function showRegistrationForm() {
  orgDashboard.style.display = 'none';
  staffLoginContainer.style.display = 'none';
  registrationContainer.style.display = 'block';
}

// Show staff login
function showStaffLogin() {
  orgDashboard.style.display = 'none';
  registrationContainer.style.display = 'none';
  staffLoginContainer.style.display = 'block';
  
  // Set organization info for login
  const org = mockOrganizations.find(org => 
    org.staff.some(staff => staff.email === currentUser.email)
  );
  
  if (org) {
    loginOrgInfo.innerHTML = `
      <div class="org-login-name">${org.name}</div>
      <div class="org-login-id">Organization ID: ${org.id}</div>
    `;
  }
}

// Update organization actions based on role
function updateOrganizationActions() {
  if (currentUser.role === 'organization_owner') {
    orgActions.innerHTML = `
      <button class="secondary-btn" id="staffPortalBtn">
        <span>👥</span> Staff Portal
      </button>
      <button class="action-btn" id="orgSettingsBtn">
        <span>⚙️</span> Organization Settings
      </button>
    `;
    
    // Add event listeners for new buttons
    document.getElementById('staffPortalBtn').addEventListener('click', () => {
      alert('Staff portal management would open here');
    });
    
    document.getElementById('orgSettingsBtn').addEventListener('click', () => {
      alert('Organization settings would open here');
    });
  } else {
    orgActions.innerHTML = `
      <button class="secondary-btn" id="leaveOrgBtn">
        <span>🚪</span> Leave Organization
      </button>
    `;
  }
}

// Load organization data
function loadOrganizationData() {
  if (!currentOrganization) return;
  
  // Update organization info card
  orgInfoCard.innerHTML = `
    <div class="org-logo">${currentOrganization.logo}</div>
    <div class="org-details">
      <h2 class="org-name">${currentOrganization.name}</h2>
      <div class="org-meta">
        <div class="meta-item">
          <div class="meta-label">Type</div>
          <div class="meta-value">${currentOrganization.type}</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Location</div>
          <div class="meta-value">${currentOrganization.location}</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Registration ID</div>
          <div class="meta-value">${currentOrganization.registrationId}</div>
        </div>
        <div class="meta-item">
          <div class="meta-label">Staff Count</div>
          <div class="meta-value">${currentOrganization.staff.length} employees</div>
        </div>
      </div>
      <div class="org-services">
        <div class="meta-label">Services</div>
        <div class="meta-value">${currentOrganization.services}</div>
      </div>
    </div>
  `;
  
  // Update stats
  staffCount.textContent = currentOrganization.staff.length;
  announcementsCount.textContent = currentOrganization.announcements.length;
  meetingsCount.textContent = '12'; // Mock data
  activeProjects.textContent = '5'; // Mock data
  
  // Load announcements
  loadAnnouncements();
  
  // Load staff
  loadStaff();
}

// Load announcements
function loadAnnouncements() {
  if (!currentOrganization) return;
  
  announcementsList.innerHTML = '';
  
  if (currentOrganization.announcements.length === 0) {
    announcementsList.innerHTML = `
      <div class="empty-state">
        <div class="empty-icon">📢</div>
        <h3 class="empty-title">No Announcements Yet</h3>
        <p class="empty-description">Create your first announcement to keep your team informed</p>
      </div>
    `;
    return;
  }
  
  currentOrganization.announcements.forEach(announcement => {
    const announcementCard = document.createElement('div');
    announcementCard.className = 'announcement-card';
    
    announcementCard.innerHTML = `
      <div class="announcement-header">
        <h3 class="announcement-title">${announcement.title}</h3>
        <div class="announcement-meta">
          <span class="announcement-visibility">${getVisibilityLabel(announcement.visibility)}</span>
          <span>${formatDate(announcement.date)}</span>
        </div>
      </div>
      <div class="announcement-content">${announcement.content}</div>
      <div class="announcement-footer">
        <span>By ${announcement.author}</span>
      </div>
    `;
    
    announcementsList.appendChild(announcementCard);
  });
}

// Load staff
function loadStaff() {
  if (!currentOrganization) return;
  
  staffList.innerHTML = '';
  
  currentOrganization.staff.forEach(staff => {
    const staffCard = document.createElement('div');
    staffCard.className = 'staff-card';
    
    staffCard.innerHTML = `
      <div class="staff-avatar">${staff.avatar}</div>
      <div class="staff-info">
        <div class="staff-name">${staff.name}</div>
        <div class="staff-role">${staff.role}</div>
        <div class="staff-id">ID: ${staff.staffId}</div>
      </div>
      <div class="staff-actions-menu">
        <button class="staff-action-btn" title="Edit">✏️</button>
        <button class="staff-action-btn" title="Remove">🗑️</button>
      </div>
    `;
    
    staffList.appendChild(staffCard);
  });
}

// Get visibility label
function getVisibilityLabel(visibility) {
  switch (visibility) {
    case 'organization': return 'Organization Only';
    case 'meet': return 'MEET Platform';
    case 'both': return 'Both Platforms';
    default: return 'Organization Only';
  }
}

// Format date
function formatDate(dateString) {
  const options = { year: 'numeric', month: 'short', day: 'numeric' };
  return new Date(dateString).toLocaleDateString(undefined, options);
}

// Setup event listeners
function setupEventListeners() {
  // Dark mode toggle
  const darkToggle = document.getElementById('darkToggle');
  (function initTheme(){
    const t = localStorage.getItem('meet_theme') || (window.matchMedia && window.matchMedia('(prefers-color-scheme:dark)').matches ? 'dark' : 'light');
    if(t==='dark') document.body.classList.add('dark');
    darkToggle.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
  })();
  darkToggle.addEventListener('click', ()=>{
    document.body.classList.toggle('dark');
    const now = document.body.classList.contains('dark') ? 'dark' : 'light';
    localStorage.setItem('meet_theme', now);
    darkToggle.textContent = now === 'dark' ? '☀️' : '🌙';
  });

  // New announcement button
  newAnnouncementBtn.addEventListener('click', () => {
    announcementForm.style.display = 'block';
    newAnnouncementBtn.style.display = 'none';
  });

  // Cancel announcement
  cancelAnnouncement.addEventListener('click', () => {
    announcementForm.style.display = 'none';
    newAnnouncementBtn.style.display = 'flex';
    document.getElementById('announcementTitle').value = '';
    document.getElementById('announcementContent').value = '';
  });

  // Publish announcement
  publishAnnouncement.addEventListener('click', () => {
    const title = document.getElementById('announcementTitle').value;
    const content = document.getElementById('announcementContent').value;
    const visibility = document.querySelector('input[name="visibility"]:checked').value;
    
    if (!title || !content) {
      alert('Please fill in both title and content');
      return;
    }
    
    // Create new announcement
    const newAnnouncement = {
      id: 'ann_' + Date.now(),
      title: title,
      content: content,
      visibility: visibility,
      date: new Date().toISOString().split('T')[0],
      author: currentUser.name
    };
    
    // Add to organization
    currentOrganization.announcements.unshift(newAnnouncement);
    
    // Reload announcements
    loadAnnouncements();
    
    // Reset form
    announcementForm.style.display = 'none';
    newAnnouncementBtn.style.display = 'flex';
    document.getElementById('announcementTitle').value = '';
    document.getElementById('announcementContent').value = '';
    
    // Show success message
    alert('Announcement published successfully!');
  });

  // Add staff button
  addStaffBtn.addEventListener('click', () => {
    addStaffModal.style.display = 'flex';
  });

  // Close add staff modal
  closeAddStaffModal.addEventListener('click', closeAddStaffModalHandler);
  cancelAddStaff.addEventListener('click', closeAddStaffModalHandler);
  addStaffModal.addEventListener('click', (e) => {
    if (e.target === addStaffModal) {
      closeAddStaffModalHandler();
    }
  });

  // Confirm add staff
  confirmAddStaff.addEventListener('click', () => {
    const name = document.getElementById('staffName').value;
    const role = document.getElementById('staffRole').value;
    const email = document.getElementById('staffEmail').value;
    
    if (!name || !role || !email) {
      alert('Please fill in all fields');
      return;
    }
    
    // Create new staff member (without ID/password yet)
    const newStaff = {
      id: 'staff_' + Date.now(),
      name: name,
      role: role,
      email: email,
      staffId: '', // Will be generated later
      password: '', // Will be generated later
      avatar: getRandomAvatar()
    };
    
    // Add to organization
    currentOrganization.staff.push(newStaff);
    
    // Reload staff
    loadStaff();
    
    // Close modal and reset form
    closeAddStaffModalHandler();
    document.getElementById('staffName').value = '';
    document.getElementById('staffRole').value = '';
    document.getElementById('staffEmail').value = '';
    
    // Show success message
    alert('Staff member added successfully! Generate IDs to provide login credentials.');
  });

  // Generate staff IDs button
  generateStaffIdsBtn.addEventListener('click', () => {
    generateIdsModal.style.display = 'flex';
  });

  // Close generate IDs modal
  closeGenerateIdsModal.addEventListener('click', closeGenerateIdsModalHandler);
  cancelGenerateIds.addEventListener('click', closeGenerateIdsModalHandler);
  generateIdsModal.addEventListener('click', (e) => {
    if (e.target === generateIdsModal) {
      closeGenerateIdsModalHandler();
    }
  });

  // Confirm generate IDs
  confirmGenerateIds.addEventListener('click', () => {
    const prefix = document.getElementById('idPrefix').value;
    const startId = parseInt(document.getElementById('idStart').value);
    const passwordLength = parseInt(document.getElementById('passwordLength').value);
    
    // Generate IDs and passwords for staff without them
    currentOrganization.staff.forEach((staff, index) => {
      if (!staff.staffId) {
        staff.staffId = `${prefix}-${startId + index}`;
        staff.password = generatePassword(passwordLength);
      }
    });
    
    // Reload staff
    loadStaff();
    
    // Close modal
    closeGenerateIdsModalHandler();
    
    // Show success message with credentials (in real app, this would be sent via email)
    alert('Staff IDs and passwords generated successfully! Share these credentials with your staff members.');
  });

  // Register organization
  registerOrgBtn.addEventListener('click', () => {
    const orgName = document.getElementById('orgName').value;
    const orgType = document.getElementById('orgType').value;
    const staffCountInput = document.getElementById('staffCountInput').value;
    const orgLocation = document.getElementById('orgLocation').value;
    const orgServices = document.getElementById('orgServices').value;
    
    if (!orgName || !staffCountInput || !orgLocation || !orgServices) {
      alert('Please fill in all required fields');
      return;
    }
    
    // In a real app, this would send data to the server
    // For this demo, we'll create a mock organization
    
    const newOrganization = {
      id: 'org_' + Date.now(),
      name: orgName,
      type: orgType || 'Corporation',
      location: orgLocation,
      services: orgServices,
      staffCount: parseInt(staffCountInput),
      registrationId: 'REG-' + Math.random().toString(36).substr(2, 9).toUpperCase(),
      logo: '🏢',
      ownerId: currentUser.id,
      staff: [],
      announcements: []
    };
    
    // Set as current organization
    currentOrganization = newOrganization;
    currentUser.role = 'organization_owner';
    currentUser.organizationId = newOrganization.id;
    
    // Switch to dashboard
    showOrganizationDashboard();
    
    // Show success message
    alert('Organization registered successfully!');
  });

  // Staff login
  staffLoginBtn.addEventListener('click', () => {
    const staffId = document.getElementById('staffId').value;
    const password = document.getElementById('staffPassword').value;
    
    if (!staffId || !password) {
      alert('Please enter both Staff ID and Password');
      return;
    }
    
    // In a real app, this would validate against the server
    // For this demo, we'll check against mock data
    
    const org = mockOrganizations.find(org => 
      org.staff.some(staff => staff.staffId === staffId && staff.password === password)
    );
    
    if (org) {
      // Set as current organization and switch to staff view
      currentOrganization = org;
      currentUser.role = 'organization_staff';
      showOrganizationDashboard();
      
      // Show success message
      alert('Successfully logged in to staff portal!');
    } else {
      alert('Invalid Staff ID or Password');
    }
  });

  // Quick actions
  conferenceAction.addEventListener('click', () => {
    // Navigate to conference page with organization context
    alert('Starting organization conference...');
    // In a real app: window.location.href = 'conference.html?org=' + currentOrganization.id;
  });

  manageStaffAction.addEventListener('click', () => {
    // Scroll to staff management section
    document.querySelector('.staff-section').scrollIntoView({ behavior: 'smooth' });
  });

  createAnnouncementAction.addEventListener('click', () => {
    // Show announcement form
    announcementForm.style.display = 'block';
    newAnnouncementBtn.style.display = 'none';
  });

  orgSettingsAction.addEventListener('click', () => {
    alert('Organization settings would open here');
  });
}

// Close add staff modal handler
function closeAddStaffModalHandler() {
  addStaffModal.style.display = 'none';
}

// Close generate IDs modal handler
function closeGenerateIdsModalHandler() {
  generateIdsModal.style.display = 'none';
}

// Generate random password
function generatePassword(length) {
  const charset = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789';
  let password = '';
  for (let i = 0; i < length; i++) {
    password += charset.charAt(Math.floor(Math.random() * charset.length));
  }
  return password;
}

// Get random avatar
function getRandomAvatar() {
  const avatars = ['👩‍💼', '👨‍💼', '👩‍💻', '👨‍💻', '👩‍🔬', '👨‍🔬', '👩‍🎨', '👨‍🎨'];
  return avatars[Math.floor(Math.random() * avatars.length)];
}

// Initialize organization when page loads
document.addEventListener('DOMContentLoaded', initOrganization);
</script>
</body>
</html>
